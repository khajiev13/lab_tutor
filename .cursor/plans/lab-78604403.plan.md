<!-- 78604403-9427-4229-a3ff-dabc9985efdd d99f81c3-b2dd-41d0-abb5-12898f38705d -->
## Build Lab Tutor frontend for existing FastAPI backend

### Goals

- **Create a React + TypeScript SPA** (using the existing Vite React setup in `frontend/`) with a **feature-first folder structure** under `src/`.
- **Implement auth and core course flows** for the documented endpoints: `POST /auth/register`, `POST /auth/login`, `GET /courses`, `POST /courses/{course_id}/join`, plus simple home and health checks.
- **Use shadcn UI components** for a modern, accessible UI (forms, buttons, layout, nav, toast) and **axios** (installed via npm) for HTTP requests, with clean separation of concerns.

### Folder structure (React best practice, feature-first)

Under `frontend/src/`, organize code like this:

- **`src/app/`** – App-level wiring
- `app/providers.tsx` – App-wide providers (AuthProvider, ThemeProvider, ToastProvider, etc.).
- `app/routes.tsx` – React Router configuration for public and protected routes.
- `app/App.tsx` – Top-level app component that uses providers and routes.
- **`src/features/`** – Feature folders (domain-oriented)
- `features/auth/`
  - `components/` – Small presentational auth components (e.g. `AuthCard`, `AuthHeader`).
  - `pages/` – `LoginPage.tsx`, `RegisterPage.tsx`.
  - `api/` – `authApi.ts` with functions for `login`, `register`.
  - `types.ts` – Auth-related TypeScript types (e.g. `LoginPayload`, `User`, `Role`).
  - `hooks.ts` – Feature hooks such as `useLogin`, `useRegister`.
- `features/courses/`
  - `components/` – Course list items, course cards, status badges.
  - `pages/` – `CoursesPage.tsx` (and optional `CourseDetailPage.tsx` in the future).
  - `api/` – `coursesApi.ts` with `getCourses`, `joinCourse`.
  - `types.ts` – Course-related types.
  - `hooks.ts` – `useCourses`, `useJoinCourse` hooks.
- `features/profile/`
  - `pages/` – `ProfilePage.tsx` placeholder using current user from auth.
- **`src/shared/`** – Reusable, non-domain-specific UI and utilities
- `ui/` – shadcn components (generated into `src/components/ui` or similar, per shadcn defaults, then re-exported or wrapped as needed).
- `components/` – Cross-feature layout components like `AppShell`, `MainNav`, `Sidebar`, `PageHeader`.
- `hooks/` – Generic hooks (e.g. `useBoolean`, `useDebounce`) if needed later.
- **`src/lib/`** – Infrastructure and low-level utilities
- `lib/axios.ts` – Configured axios instance with base URL and interceptors.
- `lib/config.ts` – Reads `import.meta.env.VITE_API_BASE_URL` with fallback to `http://localhost:8000`.
- `lib/auth-context.tsx` – `AuthContext` and `AuthProvider` using the axios client.
- `lib/storage.ts` – Helpers for safely reading/writing tokens to `localStorage`.

This structure keeps routing, app setup, and providers in `app/`, business logic in `features/`, and shared infra/UI in `lib/` and `shared/`, which is a widely used React best practice.

### High-level architecture

- **API & axios layer**
- Install axios via npm in `frontend/` and add `lib/axios.ts`:
  - Create an axios instance with `baseURL` from `config.ts`.
  - Add a request interceptor to attach the JWT `Authorization: Bearer <token>` header when a token is present (from `AuthContext` or `storage.ts`).
  - Provide typed methods in each feature API module (`authApi.ts`, `coursesApi.ts`) that call this instance and return typed results.

- **Auth state & routing**
- Implement `AuthContext` in `lib/auth-context.tsx` that:
  - Stores the authenticated user and JWT token, persisting the token via `storage.ts`.
  - Exposes `login`, `logout`, `register` methods that delegate to `features/auth/api/authApi.ts`.
- Use React Router in `app/routes.tsx` to define routes:
  - Public: `/login`, `/register`, `/` (landing/marketing or redirect logic).
  - Protected: `/app/*` for authenticated area.
- Add a `ProtectedRoute` component that checks `AuthContext` and redirects unauthenticated users to `/login`.

- **UI shell & layout (shadcn)**
- Initialize shadcn UI via npm in the `frontend/` project, following latest docs (using existing `components.json`).
- Generate core components (e.g. `button`, `input`, `label`, `card`, `form`, `toast`, `avatar`, `skeleton`, `navigation-menu` or `sheet` for mobile nav).
- Create an `AppShell` layout in `shared/components/AppShell.tsx`:
  - Uses shadcn `NavigationMenu` or a simple `header + sidebar` layout.
  - Shows app name, current user, and `Logout` button.
  - Provides a responsive layout (stacked on small screens, sidebar on larger).

- **Screens/pages**
- **Auth pages (feature-based)**
  - `LoginPage` and `RegisterPage` under `features/auth/pages/`:
  - Use shadcn `Form` components with controlled inputs.
  - Validate required fields and show inline errors.
  - On success, call `AuthContext.login`/`register` and navigate to `/app`.
- **App pages (courses, dashboard, profile)**
  - `DashboardPage` (e.g. under `features/courses/pages` or a `features/dashboard/` folder) for a simple welcome and high-level info.
  - `CoursesPage` in `features/courses/pages/`:
  - Fetches courses with `useCourses` (axios + `useEffect`).
  - Shows them using shadcn `Card` or table-like UI.
  - Provides `Join` actions wired to `useJoinCourse` → `POST /courses/{id}/join`.
  - `ProfilePage` in `features/profile/pages/`:
  - Reads current user from `AuthContext` and displays basic info.

- **State management & data fetching**
- Use **React hooks + axios** only (no extra data library for now):
  - Feature hooks (`useLogin`, `useCourses`, etc.) live alongside their feature code.
  - Each hook handles loading, error, and data; pages render these states with shadcn components (`Skeleton` for loading, `Alert` or `Toast` for errors).

- **shadcn setup & usage**
- Use npm to install shadcn and its peer dependencies (e.g. `tailwindcss`, `class-variance-authority`, `lucide-react`, etc.) following the latest shadcn docs.
- Ensure Tailwind is configured in `tailwind.config.ts` and imported in `index.css`.
- Use composition and props for reusability rather than passing large boolean prop sets; wrap shadcn primitives into domain-oriented components when reasonable.

- **Error handling & UX polish**
- Implement a **ToastProvider** at the app root using shadcn `Toast` to show global success/error messages.
- Map HTTP status codes from axios errors to friendly messages in auth and course features.
- Provide graceful fallbacks (empty states) when there are no courses or data.

- **Configuration & environment**
- Implement `config.ts` to centralize env usage and avoid hardcoding URLs.
- Use `VITE_API_BASE_URL` for different environments while defaulting to `http://localhost:8000` for local dev.

- **Testing & verification**
- Manually verify the following flows with the backend running:
  - Register a user, login, and persist the session via token.
  - Navigate within `/app` with protected routes.
  - Load courses and join a course as a student, observing success/error toasts.
  - Logout clears token and redirects back to `/login`.

### Implementation steps (in order)

1. **Restructure `src/` into app/lib/features/shared folders** (without breaking the existing Vite entry), and add `config.ts`.
2. **Install axios and shadcn (plus required Tailwind/UI dependencies) via npm** in the `frontend/` project, and generate base shadcn components.
3. **Implement the axios client and feature API modules** (`lib/axios.ts`, `features/auth/api/authApi.ts`, `features/courses/api/coursesApi.ts`).
4. **Add AuthContext, storage helpers, and routing** (`lib/auth-context.tsx`, `app/routes.tsx`, `ProtectedRoute`).
5. **Build Login and Register pages** in `features/auth/pages/` using shadcn forms and wire them to AuthContext and axios.
6. **Create AppShell and feature pages** (Dashboard, Courses, Profile) using shadcn layout components and feature hooks.
7. **Polish UX** with toasts, loading skeletons, and final manual testing against the backend.

### To-dos

- [ ] Create axios-based API client and config helper for talking to the FastAPI backend (auth, courses, health).
- [ ] Introduce AuthContext, token persistence, and React Router routes including protected routes for authenticated pages.
- [ ] Install and configure shadcn UI, Tailwind, and shared layout components (AppShell, nav, basic theming).
- [ ] Build Login and Register pages using shadcn forms, wired to the auth API and AuthContext.
- [ ] Implement Dashboard, Courses, and Profile pages using axios-based hooks and AppShell layout.
- [ ] Add loading/error UX polish and manually test end-to-end flows against the backend.